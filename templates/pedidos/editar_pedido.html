{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Pedido{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/pedidos/editar_pedido.css' %}">
{% endblock %}

{% block content %}
<h2 class="text-xl font-bold mb-4">Editar Pedido</h2>

<form method="post">
    {% csrf_token %}

    <div id="productos">
        <div class="producto flex gap-2 mb-2">
            <select name="producto" class="border px-2 py-1 rounded">
                {% for item in inventario %}
                    <option value="{{ item.producto.id }}">
                        {{ item.producto.nombre }} (Stock: {{ item.cantidad }}) - ${{ item.precio_venta }}
                    </option>
                {% endfor %}
            </select>
            <input type="number" name="cantidad" min="1" placeholder="Cantidad" class="border px-2 py-1 rounded w-20">
        </div>
    </div>

    <button type="button" onclick="agregarProducto()" class="bg-gray-600 text-white px-3 py-1 rounded hover:bg-gray-700">âž• Agregar Producto</button>
    <button type="submit" class="bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700 ml-2">ðŸ’¾ Guardar Cambios</button>
</form>

<script>
function agregarProducto() {
    const contenedor = document.getElementById('productos');
    const copia = contenedor.children[0].cloneNode(true);
    copia.querySelector('input').value = '';
    contenedor.appendChild(copia);
}
</script>
{% endblock %}
