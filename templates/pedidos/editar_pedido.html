{% extends 'base.html' %}
{% load static %}

{% block title %}Editar Pedido{% endblock %}

{% block head %}
<link rel="stylesheet" href="{% static 'css/pedidos/editar_pedido.css' %}">
<link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<h2 class="text-2xl font-bold mb-6 text-center">‚úèÔ∏è Editar Pedido #{{ pedido.id }}</h2>

<form method="post" class="space-y-6 max-w-3xl mx-auto bg-white p-6 rounded shadow">
    {% csrf_token %}
    
    <h3 class="text-lg font-semibold">Productos ya agregados:</h3>
    <ul class="mb-4 list-disc list-inside">
        {% for pp in pedido.productos.all %}
        <li>{{ pp.producto.nombre }} (x{{ pp.cantidad }})</li>
        {% endfor %}
    </ul>

    <h3 class="text-lg font-semibold mt-4 mb-2">Agregar Nuevos Productos</h3>
    <div class="space-y-2">
        {% for producto in productos %}
        <div class="flex items-center gap-4 border-b pb-2">
            <label class="flex-1">
                <input type="checkbox" name="producto" value="{{ producto.id }}" class="mr-2">
                {{ producto.nombre }} (Stock: {{ producto.stock }})
            </label>
            <input type="number" name="cantidad" min="1" class="border rounded px-2 py-1 w-24" placeholder="Cantidad">
        </div>
        {% endfor %}
    </div>

    <div class="text-center">
        <button type="submit" class="bg-yellow-600 text-white px-6 py-2 rounded hover:bg-yellow-700">
            üíæ Guardar Cambios
        </button>
    </div>
</form>
{% endblock %}
